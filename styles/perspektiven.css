/* AMORPH v5 - Perspektiven Styles */
/* Black Glasmorphism - Dezent */

/* === PERSPEKTIVEN-FILTER auf Feldern === */
amorph-container[data-field] {
  transition: all 0.2s ease;
}

/* Wenn Perspektiven aktiv: Felder die NICHT markiert sind, verstecken */
[data-amorph-container].perspektiven-aktiv .amorph-item amorph-container[data-field] {
  display: none !important;
}

/* Immer sichtbare Basisfelder */
[data-amorph-container].perspektiven-aktiv .amorph-item amorph-container[data-field="name"],
[data-amorph-container].perspektiven-aktiv .amorph-item amorph-container[data-field="bild"] {
  display: block !important;
}

/* Felder die zur aktiven Perspektive geh√∂ren - leuchtender Glow */
[data-amorph-container].perspektiven-aktiv .amorph-item amorph-container[data-field][data-perspektive-sichtbar] {
  display: block !important;
  position: relative;
  padding-left: var(--space-md);
  margin-left: 4px;
  /* Kein solider Balken - stattdessen Glow */
  border-left: none;
}

/* Leuchtender vertikaler Glow-Streifen */
[data-amorph-container].perspektiven-aktiv .amorph-item amorph-container[data-field][data-perspektive-sichtbar]::before {
  content: '';
  position: absolute;
  left: 0;
  top: 2px;
  bottom: 2px;
  width: 2px;
  background: var(--feld-perspektive-farbe, var(--color-accent));
  border-radius: 2px;
  /* Leuchtender Glow-Effekt */
  box-shadow: 
    0 0 6px var(--feld-perspektive-farbe, var(--color-accent)),
    0 0 12px color-mix(in srgb, var(--feld-perspektive-farbe, var(--color-accent)) 60%, transparent),
    0 0 20px color-mix(in srgb, var(--feld-perspektive-farbe, var(--color-accent)) 30%, transparent);
  animation: feld-glow 2.5s ease-in-out infinite;
}

@keyframes feld-glow {
  0%, 100% { 
    opacity: 0.8;
    box-shadow: 
      0 0 6px var(--feld-perspektive-farbe, var(--color-accent)),
      0 0 12px color-mix(in srgb, var(--feld-perspektive-farbe, var(--color-accent)) 60%, transparent),
      0 0 20px color-mix(in srgb, var(--feld-perspektive-farbe, var(--color-accent)) 30%, transparent);
  }
  50% { 
    opacity: 1;
    box-shadow: 
      0 0 8px var(--feld-perspektive-farbe, var(--color-accent)),
      0 0 18px color-mix(in srgb, var(--feld-perspektive-farbe, var(--color-accent)) 80%, transparent),
      0 0 30px color-mix(in srgb, var(--feld-perspektive-farbe, var(--color-accent)) 50%, transparent);
  }
}

/* Bei mehreren Perspektiven - Multi-Color Glow */
[data-amorph-container].perspektiven-aktiv .amorph-item amorph-container[data-field][data-perspektive-sichtbar][data-perspektive-multi] {
  padding-left: var(--space-md);
}

/* Multi-Perspektiven: Animierter Gradient Glow */
[data-amorph-container].perspektiven-aktiv .amorph-item amorph-container[data-field][data-perspektive-sichtbar][data-perspektive-multi]::before {
  width: 2px;
  /* Animierter vertikaler Gradient */
  background: var(--feld-gradient, var(--color-accent));
  background-size: 100% 200%;
  /* Kombinierter leuchtender Glow aus allen Farben */
  box-shadow: 
    0 0 8px var(--p-farbe-0, var(--color-accent)),
    0 0 8px var(--p-farbe-1, var(--color-accent)),
    0 0 16px color-mix(in srgb, var(--p-farbe-0, var(--color-accent)) 70%, transparent),
    0 0 16px color-mix(in srgb, var(--p-farbe-1, var(--color-accent)) 70%, transparent),
    0 0 28px color-mix(in srgb, var(--p-farbe-0, var(--color-accent)) 40%, transparent),
    0 0 28px color-mix(in srgb, var(--p-farbe-1, var(--color-accent)) 40%, transparent);
  animation: multi-color-flow 3s ease-in-out infinite;
}

@keyframes multi-color-flow {
  0%, 100% { 
    background-position: 0% 0%;
    filter: brightness(1);
  }
  50% { 
    background-position: 0% 100%;
    filter: brightness(1.4);
  }
}

/* === TREFFER-BADGE === */
.amorph-perspektive-btn {
  position: relative;
}

.amorph-perspektive-btn.hat-treffer::after {
  content: attr(data-treffer-anzahl);
  position: absolute;
  top: -6px;
  right: -6px;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  font-size: 10px;
  font-weight: 600;
  line-height: 16px;
  text-align: center;
  color: white;
  background: color-mix(in srgb, var(--p-farbe, var(--color-accent)) 80%, black);
  border-radius: 8px;
  animation: badge-pop 0.3s ease-out;
}

@keyframes badge-pop {
  0% { transform: scale(0); opacity: 0; }
  70% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}
